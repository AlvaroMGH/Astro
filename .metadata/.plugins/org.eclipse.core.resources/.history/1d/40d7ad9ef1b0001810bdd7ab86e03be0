package astrolib.coordinates;


/**
 * @author alvaro.gonzalez
 * @version 1.0
 * @created 05-sep-2018 10:22:41
 */
public class CircularCoordinate {
	

	private float degrees360; /** Degrees in interval [0-360[ */
	public float getDegrees360(){ return degrees360; }

	private float degrees180; /** Degrees in interval [0-180[ */
	public float getDegrees180() { return degrees180;  } 



	public void finalize() throws Throwable {

	}


	// Sexagesimal System
	private int sexagesimaDegree;
	private int sexagesimalMinutes;
	private float SexagesimalSeconds;
	public int getGradosSexagesimal() { return sexagesimaDegree; }
	public int getMinutosSexagesimal() { return sexagesimalMinutes; }
	public float getSegundosSexagesimal() { return SexagesimalSeconds; }
	
	/**
	 * Default constructor
	 * Set to 0º
	 */
	public CircularCoordinate() {
		setDegrees360( 0 );
	}
	
	/**
	 * Copy constructor
	 * @param c
	 */
	public CircularCoordinate( CircularCoordinate c)
	{
		setDegrees360( c.degrees360 );
	}


	

	/**
	 * Calculte the difference between current coordinate and the parameter coordinate
	 * @param cc subtrahend
	 * @return difference
	 */
	protected CircularCoordinate subtract( CircularCoordinate cc )
	{
		CircularCoordinate result = new CircularCoordinate( this );
		float fDegrees360Aux = this.degrees360 - cc.getDegrees360();
		result.setDegrees360(fDegrees360Aux);
		return result;
	}
	
	
	/**
	 * Calculte the sum of current coordinate and the parameter coordinate
	 * @param cc summand
	 * @return summ
	 */
	protected CircularCoordinate add( CircularCoordinate cc )
	{
		CircularCoordinate result = new CircularCoordinate( this );
		float fDegrees360Aux = this.degrees360 + cc.getDegrees360();
		result.setDegrees360(fDegrees360Aux);
		return result;
	}

	/**
	 * Normalizes the total of degrees to the interval [0-360[
	 * @param degrees
	 */
	protected float calculateDegrees360( float degrees )
	{
		float auxDegrees = degrees;
		
		if ( Math.abs(degrees) >= 360 )
		{
			auxDegrees = degrees % 360;
		}
		
		if ( auxDegrees < 0) 
		{
			auxDegrees += 360;
		}

		return auxDegrees;
	}
	
	
	/**
	 * Once set this.degrees360 sets degrees180 to the interval ]-180 - 180]
	 */
	protected void calculateDegrees180() {
		if ( this.degrees360 > 180)
		{
			this.degrees180 = this.degrees360 - 360;
		}
		else
		{
			this.degrees180 =  this.degrees360;
		}
	}
	
	
	/**
	 * @brief  Saves in format XXº YY' SS.SS''
	 */
	private void calculateSexagesimal()
	{
		this.sexagesimaDegree = (int) (this.degrees360);
		float remainingDegrees = this.degrees360 - (float)this.sexagesimaDegree;
		this.sexagesimalMinutes = (int) (remainingDegrees * 60);
		this.SexagesimalSeconds = this.degrees360 - (float)this.sexagesimaDegree - (float)this.sexagesimalMinutes/60;		
	}	
	
	
	/**
	 * @brief Convert into interval [0-360[
	 * 
	 * Example: 365º is convert to 5º
	 * @param degrees
	 */	
	private void setDegrees360(float degrees )
	{
		this.degrees360 = calculateDegrees360( degrees );
		calculateDegrees180();
		calculateSexagesimal(); // Save in format XXº YY' SS.SS''
	}
	


}